<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
	<head>
		<meta charset="utf-8" />
		<meta name="generator" content="pandoc" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
		<title>You should be able to run CI commands locally</title>
		<style>
		/* https://cdn.jsdelivr.net/npm/spcss@0.9.0 */

		body{color:#333;font-family:helvetica,arial,sans-serif;line-height:1.5;margin:0 auto;max-width:40em;padding:0 1em}h1,h2,h3,h4,h5,h6{margin:1.25em 0 .5em;line-height:1.2}a:link{color:#00e}a:visited{color:#518}a:focus,a:hover{color:#03f}a:active{color:#e00}h1 a:empty:before,h2 a:empty:before,h3 a:empty:before,h4 a:empty:before,h5 a:empty:before,h6 a:empty:before{content:"#"}h1 a:empty,h2 a:empty,h3 a:empty,h4 a:empty,h5 a:empty,h6 a:empty{visibility:hidden;padding-left:.25em}h1:hover a:empty,h2:hover a:empty,h3:hover a:empty,h4:hover a:empty,h5:hover a:empty,h6:hover a:empty{visibility:visible}img{max-width:100%}figure{margin:1em 0;text-align:center}figcaption{font-size:small}code,kbd,pre,samp{font-family:monospace,monospace}code,kbd,pre{color:#050}samp{color:#730}blockquote,pre{background:#eee;padding:.5em}pre{overflow:auto}blockquote{border-left:medium solid #ccc;margin:1em 0}blockquote :first-child{margin-top:0}blockquote :last-child{margin-bottom:0}table{border-collapse:collapse}td,th{border:thin solid #999;padding:.3em .4em;text-align:left}@media (prefers-color-scheme:dark){body{background:#111;color:#bbb}a:link{color:#9bf}a:visited{color:#caf}a:focus,a:hover{color:#9cf}a:active{color:#f99}code,kbd,pre{color:#9c6;font-family:monospace,monospace}samp{color:#db0}blockquote,pre{background:#000}blockquote{border-color:#333}td,th{border-color:#666}}

		kbd {
			color: cyan;
			border: 1px solid white;
			border-radius: 5px;
			border-bottom: 3px solid white;
			padding: 0.1rem 0.4rem;
		}
		</style>
	</head>
	<body>
				<header id="title-block-header">
			<h1 class="title">You should be able to run CI commands locally</h1>
					</header>
				<nav role="nav">
			<a href="https://ktandun.github.io/myblog">Home</a>
		</nav>
		<main> <p>I have worked for some years as a software developer and I
noticed a reccuring pattern. The commands in the CI pipeline is not easy
or intuitive to run locally. This makes it harder to check whether
things will succeed in pipeline, even more annoying when the pipeline
sometimes takes upwards of 10+ minutes or even an hour to complete. With
all the available tools we have nowadays, pipeline commands should be
contained in a script or even better a <a
href="https://github.com/casey/just">justfile</a>.</p>
<p>Compare the small example below:</p>
<pre><code># without justfile

jobs:
  test:
    runs-on: self-hosted
    steps:
      - uses: actions/checkout@v4

      - run: dbmate drop &amp;&amp; dbmate up
        working-directory: ./backend

      - run: gleam deps download
        working-directory: ./backend

      - run: gleam build
        working-directory: ./backend

      - run: gleam test
        working-directory: ./backend</code></pre>
<pre><code># all the logic is wrapped inside justfile

jobs:
  test:
    runs-on: self-hosted
    steps:
      - uses: actions/checkout@v4

      - run: just test-ci</code></pre>
<p>When something goes wrong and you need to debug it locally, it is
waaay easier to just run <code>just test-ci</code> instead of copy and
pasting commands from your yml file.</p>
<p>/rant</p> </main>
		<footer>
			<hr>
			<p> This site uses <a href="https://github.com/susam/spcss">spcss</a> </p>
		</footer>
	</body>
</html>
